{"version":3,"sources":["webpack:///./src/views/Game.vue?daa0","webpack:///./src/components/Pile.vue?3c76","webpack:///./src/views/Game.vue?e81b","webpack:///./src/components/Desk.vue?0797","webpack:///./src/components/Card.vue?32cc","webpack:///src/components/Card.vue","webpack:///./src/components/Card.vue?7cd0","webpack:///./src/components/Card.vue","webpack:///src/components/Desk.vue","webpack:///./src/components/Desk.vue?7279","webpack:///./src/components/Desk.vue","webpack:///./src/components/Pile.vue?c1d6","webpack:///src/components/Pile.vue","webpack:///./src/components/Pile.vue?1ca3","webpack:///./src/components/Pile.vue","webpack:///src/views/Game.vue","webpack:///./src/views/Game.vue?f01b","webpack:///./src/views/Game.vue","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./src/components/Desk.vue?110e","webpack:///./node_modules/core-js/modules/es.array.fill.js","webpack:///./src/components/Card.vue?fa10"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","directives","name","rawName","value","expression","ref","staticClass","on","$event","qrShown","key","style","_v","resetGame","game","players","illegalFeedback","nativeOn","writeQR","_e","_s","gameState","turns","turnActions","length","done","signalReady","endButtonText","staticRenderFns","grid","_l","card","i","parseInt","deckMap","class","turned","turnable","off","collected","turn","staticStyle","src","props","index","Number","type","String","default","Boolean","data","computed","$store","getters","canTurn","isSinglePlayer","methods","dispatch","$parent","$emit","component","deckSize","components","Card","cards","slice","c","transform","transforms","pointerEvents","Math","floor","playerIndex","Array","fill","map","collectedCards","getRandom","watch","val","prev","push","ready","playing","created","$route","params","id","then","document","documentElement","setProperty","Audio","play","beforeDestroy","commit","$refs","qr","innerHTML","qrGen","writeToDom","svg","removeAttribute","setAttribute","Desk","Pile","toObject","toAbsoluteIndex","toLength","module","exports","O","argumentsLength","arguments","undefined","end","endPos","$","addToUnscopables","target","proto"],"mappings":"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","file":"js/chunk-3b7e35ae.c3d6722f.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=style&index=0&lang=stylus&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pile.vue?vue&type=style&index=0&id=3452e162&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pile.vue?vue&type=style&index=0&id=3452e162&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.qrShown),expression:\"qrShown\"}],ref:\"qr\",staticClass:\"qr\",attrs:{\"id\":\"qr\"},on:{\"click\":function($event){_vm.qrShown = false}}})]),_c('transition',{attrs:{\"name\":\"swap\",\"mode\":\"out-in\"}},[(_vm.ready)?_c('div',{key:\"1\",staticClass:\"game\",style:(_vm.theme)},[_c('div',{staticClass:\"controls controls-left\"},[_c('div',{staticClass:\"control-corner\"},[_c('btn',{attrs:{\"mega\":\"\",\"to\":\"/\"}},[_vm._v(\"Close\")]),_c('btn',{attrs:{\"mega\":\"\"},on:{\"click\":_vm.resetGame}},[_vm._v(\"Start over\")])],1),_c('div',{staticClass:\"player-corner\"},[_c('pile',{attrs:{\"player-index\":1}}),_c('avatar',{attrs:{\"user\":_vm.game.players['1'],\"live\":\"\"}})],1)]),_c('desk',{staticClass:\"desk\",on:{\"illegal\":_vm.illegalFeedback}}),_c('div',{staticClass:\"controls controls-right\"},[_c('div',{staticClass:\"player-corner\"},[(_vm.game.players['2'])?_c('avatar',{attrs:{\"user\":_vm.game.players['2'],\"live\":\"\"},nativeOn:{\"click\":function($event){return _vm.writeQR($event)}}}):_vm._e(),_c('pile',{attrs:{\"player-index\":2}})],1),_c('div',{staticClass:\"control-corner\"},[_c('div',{staticClass:\"turn-count\"},[_c('b',[_vm._v(_vm._s(_vm.game.gameState.turns))]),_vm._v(\" turns \")]),_c('btn',{staticClass:\"endButton\",attrs:{\"mega\":\"\",\"disabled\":_vm.game.turnActions.length < 2 || _vm.done},on:{\"click\":_vm.signalReady}},[_vm._v(_vm._s(_vm.endButtonText))])],1)])],1):_c('div',{key:\"2\",staticClass:\"loading-screen\"},[_c('div',[_c('logo'),_c('div',{staticClass:\"loading-text\"},[_vm._v(\"Connecting...\")])],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"desk\",style:({\n    '--grid-size': _vm.grid,\n  })},_vm._l((_vm.game.cardState),function(card,i){return _c('card',{key:i,attrs:{\"index\":parseInt(i),\"src\":_vm.deckMap[i],\"turned\":card != 0,\"collected\":card > 0}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['card', { turned: _vm.turned, turnable: _vm.turnable, off: _vm.off, collected: _vm.collected }],on:{\"&click\":function($event){return _vm.turn($event)}}},[_c('div',{staticClass:\"card-side back\"},[_c('logo',{staticStyle:{\"opacity\":\".5\"}})],1),_c('div',{staticClass:\"card-side face\"},[_c('img',{staticClass:\"card-image\",attrs:{\"src\":_vm.src}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"['card', { turned, turnable, off, collected }]\" @click.passive=\"turn\">\n    <div class=\"card-side back\">\n      <logo style=\"opacity: .5\" />\n    </div>\n    <div class=\"card-side face\">\n      <img class=\"card-image\" :src=\"src\">\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    index: Number,\n    src: {\n      type: String,\n      default: '/img/fh-full.svg'\n    },\n    turned: Boolean,\n    collected: Boolean\n  },\n  data () {\n    return {\n    }\n  },\n  computed: {\n    turnable () {\n      return this.$store.getters.canTurn\n    },\n    off () {\n      return !this.$store.getters.isSinglePlayer && this.collected\n    }\n  },\n  methods: {\n    turn () {\n      this.$store.dispatch('selectCard', this.index)\n      this.$parent.$emit('illegal')\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.card\n  position relative\n  transform-style preserve-3d\n  transition transform .4s var(--ease-out-back), opacity .3s\n  cursor not-allowed\n  &.turnable\n    cursor pointer\n  &.turned\n    transform rotateY(-180deg)\n  &.off\n    cursor default\n    pointer-events none\n    //opacity 0\n  &.collected\n    transform rotateY(-180deg) scale(0)\n\n.card-side\n  position absolute\n  width 100%\n  height 100%\n  backface-visibility hidden\n  border-radius 5%\n\n.back\n  background linear-gradient(135deg, var(--primary), var(--primary-stop))\n  padding 15%\n\n.face\n  transform rotateY(180deg)\n  background-color #fff\n\n.card-image\n  position relative\n  background-color #eee\n  width 94%\n  height @width\n  margin 3%\n  border-radius 3%\n  object-fit cover\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Card.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Card.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Card.vue?vue&type=template&id=22ae467c&scoped=true&\"\nimport script from \"./Card.vue?vue&type=script&lang=js&\"\nexport * from \"./Card.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Card.vue?vue&type=style&index=0&id=22ae467c&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22ae467c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <main\n    class=\"desk\"\n    :style=\"{\n      '--grid-size': grid,\n    }\"\n  >\n    <card\n      v-for=\"(card, i) in game.cardState\"\n      :key=\"i\"\n      :index=\"parseInt(i)\"\n      :src=\"deckMap[i]\"\n      :turned=\"card != 0\"\n      :collected=\"card > 0\"\n    />\n  </main>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport Card from '@/components/Card'\nexport default {\n  computed: {\n    ...mapState(['game', 'deckMap']),\n    grid () {\n      const deckSize = this.game.deck.size\n      if (deckSize <= 16) {\n        return 4\n      } else if (deckSize <= 36) {\n        return 6\n      } else {\n        return 8\n      }\n    }\n  },\n  components: {\n    Card\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.desk\n  display grid\n  grid-template-columns repeat(var(--grid-size), 1fr)\n  grid-template-rows repeat(var(--grid-size), 1fr)\n  grid-gap 1%\n  padding 1em\n\n.desk\n  height 100vh\n  width @height\n  perspective 100vh\n@media (orientation portrait)\n  .desk\n    width 100vw\n    height @width\n    perspective 100vw\n\n@media (orientation landscape) and (max-aspect-ratio 5/3)\n  .desk\n    width 65vw\n    height @width\n@media (max-aspect-ratio 3/4)\n  .desk\n    width 95vw\n    height @width\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Desk.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Desk.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Desk.vue?vue&type=template&id=f39636be&scoped=true&\"\nimport script from \"./Desk.vue?vue&type=script&lang=js&\"\nexport * from \"./Desk.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Desk.vue?vue&type=style&index=0&id=f39636be&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f39636be\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pile\"},[_vm._l((_vm.cards.slice(0, 8)),function(c,i){return _c('img',{key:i,staticClass:\"pile-card\",style:({transform: _vm.transforms[i], pointerEvents: 'none'}),attrs:{\"src\":c,\"turned\":\"\"}})}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cards.length > 0),expression:\"cards.length > 0\"}],staticClass:\"counter\"},[_vm._v(_vm._s(Math.floor(_vm.cards.length / 2)))])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"pile\">\n    <img\n      v-for=\"(c, i) in cards.slice(0, 8)\"\n      :key=\"i\"\n      :src=\"c\"\n      turned\n      class=\"pile-card\"\n      :style=\"{transform: transforms[i], pointerEvents: 'none'}\"\n    />\n    <div class=\"counter\" v-show=\"cards.length > 0\">{{ Math.floor(cards.length / 2)}}</div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    playerIndex: Number\n  },\n  data () {\n    return {\n      transforms: Array(64).fill(0).map(c => `rotateZ(${Math.random() * 20 - 10}deg)`)\n    }\n  },\n  computed: {\n    cards () {\n      return this.$store.getters.collectedCards(this.playerIndex)\n    }\n  },\n  methods: {\n    getRandom () {\n      return `rotateZ(${Math.random() * 20 - 10}deg)`\n    }\n  },\n  watch: {\n    cards (val, prev) {\n      if (val.length !== prev.length) {\n        this.transforms = []\n        for (let i = 0; i < val.length; i++) {\n          this.transforms.push(`rotateZ(${Math.random() * 20 - 10}deg)`)\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.pile\n  perspective 100px\n  position relative\n  width calc(3em + 6vw)\n  height @width\n  margin 1.5em\n\n.pile-card\n  display block\n  position absolute\n  width 90%\n  height @width\n  top 5%\n  left 5%\n  background-color #eee\n  padding 3%\n  border-radius 3%\n  object-fit cover\n\n.counter\n  position absolute\n  top -.5em\n  left @top\n  box-shadow .25em .25em 1em var(--bg)\n  width 2em\n  height @width\n  line-height @height\n  border-radius 1em\n  background-color var(--primary)\n  font-weight bold\n  border .1em solid\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pile.vue?vue&type=template&id=3452e162&scoped=true&\"\nimport script from \"./Pile.vue?vue&type=script&lang=js&\"\nexport * from \"./Pile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Pile.vue?vue&type=style&index=0&id=3452e162&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3452e162\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <transition name=\"fade\">\n      <div class=\"qr\" ref=\"qr\" id=\"qr\" v-show=\"qrShown\" @click=\"qrShown = false\"></div>\n    </transition>\n    <transition name=\"swap\" mode=\"out-in\">\n      <div\n        key=1\n        v-if=\"ready\"\n        class=\"game\"\n        :style=\"theme\"\n      >\n        <!-- Split controls 1 -->\n        <div class=\"controls controls-left\">\n          <div class=\"control-corner\">\n            <btn mega to=\"/\">Close</btn>\n            <btn mega @click=\"resetGame\">Start over</btn>\n          </div>\n          <div class=\"player-corner\">\n            <pile :player-index=\"1\" />\n            <avatar :user=\"game.players['1']\" live></avatar>\n          </div>\n        </div>\n        <!-- Main play area -->\n        <desk class=\"desk\" @illegal=\"illegalFeedback\" />\n        <!-- Split controls 2 -->\n        <div class=\"controls controls-right\">\n          <div class=\"player-corner\">\n            <avatar v-if=\"game.players['2']\" :user=\"game.players['2']\" live @click.native=\"writeQR\"></avatar>\n            <pile :player-index=\"2\" />\n          </div>\n          <div class=\"control-corner\">\n            <div class=\"turn-count\">\n              <b>{{game.gameState.turns}}</b>\n              turns\n            </div>\n            <btn mega class=\"endButton\" @click=\"signalReady\" :disabled=\"game.turnActions.length < 2 || done\">{{ endButtonText }}</btn>\n          </div>\n        </div>\n      </div>\n      <div key=2 v-else class=\"loading-screen\">\n        <div>\n          <logo />\n          <div class=\"loading-text\">Connecting...</div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport { BrowserQRCodeSvgWriter } from '@zxing/library'\nimport { mapState, mapGetters, mapActions } from 'vuex'\nimport Desk from '@/components/Desk'\nimport Pile from '@/components/Pile'\n\nexport default {\n  name: 'game',\n  data () {\n    return {\n      ready: false,\n      qrShown: false\n    }\n  },\n  computed: {\n    ...mapState(['user', 'game']),\n    ...mapGetters(['match', 'theme', 'playing', 'done']),\n    endButtonText () {\n      if (this.done) {\n        return 'Waiting...'\n      } else {\n        return this.playing ? 'End turn' : 'End observing'\n      }\n    }\n  },\n  created () {\n    this.$store.dispatch('bindGame', this.$route.params.id).then(() => {\n      this.ready = true\n      this.$store.dispatch('getDeckMap')\n      document.documentElement.style.setProperty('--bg-img', `url(${this.$store.state.game.deck.backImage})`)\n      this.$store.commit('showImage')\n      new Audio('/sound/complete.mp3').play()\n    })\n  },\n  beforeDestroy () {\n    this.$store.commit('hideImage')\n  },\n  methods: {\n    ...mapActions(['signalReady', 'endGame', 'resetGame']),\n    illegalFeedback () {\n\n    },\n    writeQR () {\n      const qrGen = new BrowserQRCodeSvgWriter()\n      const base = 'https://fh.ovi.moe'\n      this.$refs.qr.innerHTML = ''\n      qrGen.writeToDom('#qr', `${base}/join/${this.game.id}`, 300, 300)\n      const svg = this.$refs.qr.querySelector('svg')\n      svg.removeAttribute('width')\n      svg.removeAttribute('height')\n      svg.setAttribute('viewBox', '0 0 300 300')\n      this.qrShown = true\n    }\n  },\n  components: {\n    Desk,\n    Pile\n  }\n}\n</script>\n\n<style lang=\"stylus\">\n.qr\n  position fixed\n  z-index 100\n  width 90vh\n  height @width\n  top 50%\n  left 50%\n  transform translate(-50%, -50%)\n  border-radius 2em\n  box-shadow 0 0 10em 2em var(--bg)\n  background-color white\n@media (orientation portrait)\n  .qr\n    width 90vw\n    height @width\n\n.swap-enter-active, .swap-leave-active\n  transition transform .4s\n\n.swap-enter, .swap-leave-to\n  transform scale(1.2)\n  opacity 0\n\n.endButton\n  position relative\n  &:not(:disabled)\n    animation bigbop .4s\n  &::before\n    position absolute\n    top 0\n    left calc(50% - 1em)\n    z-index -1\n    content ''\n    width 2em\n    height @width\n    background-color white\n    opacity 0\n    border-radius 10em\n.endButton:not(:disabled)::before\n  opacity .8\n  animation megapop 1.3s ease-out infinite\n\n@keyframes megapop\n  10%\n    transform none\n  70%, 100%\n    transform scale(10)\n    opacity 0\n\n@keyframes bigbop\n  30%\n    transform scaleX(1.4) scaleY(.7)\n\n.loading-screen\n  display flex\n  justify-content center\n  align-items center\n  width 100vw\n  height 100vh\n  div div svg\n    height 70%\n    width @height\n    fill var(--primary)\n\n.loading-text\n  font-weight bold\n  font-size 1.1rem\n  margin 1em\n\n.game\n  display flex\n  justify-content space-between\n  flex-wrap wrap\n  min-height 100vh\n  overflow hidden\n@media (orientation portrait)\n  .game\n    flex-direction column\n\n.desk\n  align-self center\n\n.controls\n  margin 1em 0\n  flex 1 1 0em\n  display flex\n  justify-content space-between\n  align-items center\n  flex-direction column\n  button, a\n    display block\n    margin .5em\n@media (orientation portrait)\n  .controls\n    margin 0 1em\n    flex-direction row\n@media (max-height 400px), (max-width 400px)\n  .controls\n    font-size .7rem\n    .fh-btn\n      font-size 1.2rem\n      padding .3em .5em\n    .counter\n      font-size 1.5em\n    .avatar\n      .info\n        font-size 1rem\n      .image\n        width 50px\n        height @width\n\n.player-corner\n  display flex\n  align-items center\n  flex-direction column\n@media (orientation portrait)\n  .player-corner\n    flex-direction row\n\n.turn-count\n  font-size 1.5em\n  b\n    font-size 2em\n\n@media (orientation portrait)\n  .control-corner\n    display flex\n    flex 1 0 0\n    justify-content center\n    align-items center\n    flex-wrap wrap\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Game.vue?vue&type=template&id=19d6601a&\"\nimport script from \"./Game.vue?vue&type=script&lang=js&\"\nexport * from \"./Game.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Game.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Desk.vue?vue&type=style&index=0&id=f39636be&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Desk.vue?vue&type=style&index=0&id=f39636be&lang=stylus&scoped=true&\"","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Card.vue?vue&type=style&index=0&id=22ae467c&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Card.vue?vue&type=style&index=0&id=22ae467c&lang=stylus&scoped=true&\""],"sourceRoot":""}